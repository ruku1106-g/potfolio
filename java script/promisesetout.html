<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        const p = new Promise((resolve, reject)=> { // saying the we have 2 states
        setTimeout(()=>{
            let app="BMS";
        if(app === "BMS") // if its true 
            resolve("1.open Bms"); // we will pass this to then(); as an promise 
        else 
            reject("not found BMS"); // else it acts as an try and pass this as an exception to the catch
        },6000);
     })  

    p.then((msg)=> { // to execute the 1st one we need to pass the o/p and . refers to the current object and if u want u can give p.then()
        return new Promise((resolve)=>{ // whenerver we are resolving the promise , we need to return it or else p will not know that we are resolving and it will excetue without seeing the setTimer 
            setTimeout(()=>{
        console.log(msg);  
        console.log("2.search movies");
        resolve(); // this is used to recive the result of the next .then()
            },5000);
             });
    })
    .then(()=>{ 
        return new Promise((resolve)=> {
            setTimeout(()=>{
        console.log("3.select seat");
        resolve();
          },5000);
           });
        })
    .then(()=>{
        return new Promise((resolve)=>{
            setTimeout(()=>{
        console.log("4.ticket booked");
        resolve();         
            },5000);
             });
        })
    .catch((e)=>{ // and here we are not making use of try as we are giving reject and reject acts like an throw over here and arrow function is also not nessacry, and try is used here as its asynchronos and promises have their own error mechanism . catch();
            setTimeout(()=>{
        console.log(e);
        },4000) ;          
            })
    .finally(()=>{
                setTimeout(()=>{
            console.log("close the app");
        },2000)
            }) ;
    </script>
</body>
</html>